<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Projack Impulse - Cadastro</title>

  <!-- Fontes externas -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap">
  <link rel="stylesheet" href="https://use.typekit.net/xoh7gtf.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Quantico&display=swap">  

  <!-- CSS local -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/css_cadastro/geral.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/css_cadastro/lado_esquerdo.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/css_cadastro/lado_direito.css') }}">
</head>
<body>

  <div class="tela">
    <div class="conteudo">

      <!-- Painel esquerdo -->
      <div class="painel-esquerdo">
        <img src="{{ url_for('static', filename='imagens/imagens_cadastro/Logo.png') }}" alt="Logo Projack Impulse" class="logo" />
        <div class="painel-esquerdo-texto">
          <p>Voc√™ nasceu para explorar novos mundos. Comece agora!</p>
          <p>Cadastre-se e lidere sua jornada entre projetos.</p>
        </div>
        <a href="{{ url_for('login') }}" class="botao-voltar">Voltar para Login</a>
        <img src="{{ url_for('static', filename='imagens/imagens_cadastro/foguete.png') }}" alt="Foguete" class="foguete" />
      </div>

      <!-- Painel direito -->
      <div class="painel-direito">
        <img src="{{ url_for('static', filename='imagens/imagens_cadastro/estrelas.png') }}" alt="Decora√ß√£o" class="imagem-sobreposta" />
        <h1>Cadastre-se</h1>

        <form id="form-cadastro" method="POST" action="{{ url_for('cadastro') }}">
          <div class="form-campos">
            <div class="campo">
              <img src="{{ url_for('static', filename='imagens/imagens_cadastro/pessoa.png') }}" alt="√çcone Nome" class="icone" />
              <input type="text" placeholder="Nome" name="nome" required />
            </div>

            <div class="campo">
              <img src="{{ url_for('static', filename='imagens/imagens_cadastro/telefone.png') }}" alt="√çcone Telefone" class="icone" />
              <input type="tel" placeholder="Telefone" name="telefone" required />
            </div>

            <div class="campo">
              <img src="{{ url_for('static', filename='imagens/imagens_cadastro/envelope.png') }}" alt="√çcone E-mail" class="icone" />
              <input type="email" placeholder="E-mail" name="email" required />
            </div>

            <div class="campo">
              <img src="{{ url_for('static', filename='imagens/imagens_cadastro/cadeado.png') }}" alt="√çcone Senha" class="icone" />
              <input type="password" placeholder="Senha" name="senha" required />
              <span class="toggle-senha">üëÅÔ∏è</span>
            </div>
          </div>

          <button type="submit">Criar</button>
        </form>
      </div>

    </div>
  </div>

  <script>
    // alternar visualiza√ß√£o da senha
    document.querySelectorAll('.campo').forEach(campo => {
      const toggle = campo.querySelector('.toggle-senha');
      const input = campo.querySelector('input[type="password"]');
      if (toggle && input) {
        toggle.addEventListener('click', () => {
          input.type = input.type === 'password' ? 'text' : 'password';
          toggle.textContent = input.type === 'password' ? 'üëÅÔ∏è' : 'üôà';
        });
      }
    });

    // intercepta o envio do formul√°rio e envia para a API FastAPI
    document.getElementById('form-cadastro').addEventListener('submit', async (e) => {
      e.preventDefault();
      const form = e.target;
      const dados = {
        nome: form.nome.value,
        telefone: form.telefone.value,
        email: form.email.value,
        senha: form.senha.value,
        github: "",
        linkedin: "",
        funcao: "",
        pais: "",
        cidade: "",
        sobre_mim: "",
        icon: "cat_icon.png"
      };

      const resposta = await fetch("http://127.0.0.1:8000/cadastro", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(dados)
      });

      const resultado = await resposta.json();
      if (resposta.ok) {
        alert("Cadastro realizado com sucesso!");
        window.location.href = "{{ url_for('login') }}";
      } else {
        alert("Erro: " + (resultado.detail || "Erro ao cadastrar"));
      }
    });
  </script>

</body>
</html>
